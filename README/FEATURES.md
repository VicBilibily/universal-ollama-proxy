# ✨ 核心特性详解

本文档详细介绍 Universal Ollama Proxy 的实际功能特性。

## 🏗️ 统一架构

### OpenAI SDK 基础架构

- **统一适配器服务**：所有 AI 提供商都通过统一的适配器服务进行处理
- **OpenAI SDK 集成**：基于官方 OpenAI SDK，确保最佳兼容性和稳定性
- **标准化接口**：所有提供商都转换为标准的 OpenAI 格式，简化客户端集成

### 类型安全保障

- **完整 TypeScript 支持**：全项目 TypeScript 覆盖，编译时类型检查
- **严格类型定义**：所有 API 接口、配置文件、内部服务都有严格的类型定义
- **运行时验证**：配置文件和请求参数的运行时类型验证

## 🔄 配置管理

### 热重载系统

- **实时监控**：使用 `chokidar` 监控配置文件变化
- **无缝更新**：配置变化时自动重载，无需重启服务
- **配置验证**：重载前自动验证配置文件格式和内容
- **回滚机制**：配置错误时自动回滚到上一个有效配置

### 动态提供商管理

- **运行时加载**：动态加载和卸载 AI 提供商
- **故障隔离**：单个提供商故障不影响其他提供商服务

### 环境变量支持

- **占位符替换**：配置文件中支持 `${ENV_VAR}` 环境变量占位符
- **安全管理**：API Keys 等敏感信息通过环境变量管理

## 📊 监控与日志

### 详细日志记录

- **多级日志**：支持 debug、info、warn、error 四个级别
- **文件日志**：日志自动记录到文件，支持日志轮转
- **错误堆栈**：详细的错误堆栈信息，便于调试

### 聊天日志系统

- **完整请求记录**：记录每个聊天请求的完整参数
- **流式响应追踪**：记录每个流式响应 chunk 的内容
- **文件命名规范**：`{时间戳}_{随机ID}.json` 格式的唯一文件名
- **可选启用**：通过环境变量控制是否启用聊天日志

## 🔧 工具修复系统

### 自动修复功能

- **Anthropic 模型兼容性**：自动为 OpenRouter 的 Anthropic 模型补全缺失的
  `function.parameters` 字段
- **工具定义标准化**：自动修复和统一不同提供商的工具定义格式差异
- **参数完整性保障**：确保工具调用的参数结构完整和有效
- **兼容性增强**：提升不同 AI 提供商之间的工具调用兼容性

## 🌍 多平台支持

### 预编译二进制

- **全平台覆盖**：Windows、Linux、macOS 的 x64 和 ARM64 版本
- **无依赖运行**：二进制文件独立运行，无需 Node.js 环境
- **体积优化**：使用 `pkg` 进行体积优化和依赖打包

### 自动构建系统

- **GitHub Actions**：完全自动化的 CI/CD 构建流程
- **多平台并行**：6 个平台版本的并行构建
- **版本管理**：自动版本号管理和 Release 创建

### 跨平台兼容

- **路径处理**：跨平台的文件路径处理
- **权限管理**：不同操作系统的权限自动设置
- **信号处理**：优雅的进程退出和信号处理

## 🛠️ 开发友好

### 调试支持

- **详细日志**：debug 级别的详细调试日志
- **请求追踪**：完整的请求生命周期追踪
- **错误定位**：精确的错误位置和堆栈信息

### 开发工具

- **热重载开发**：开发模式的代码热重载
- **配置验证**：配置文件的语法和逻辑验证工具 (`npm run check`)
- **自动格式化**：代码提交时自动格式化 (Prettier + Husky)

### 文档完整

- **详细文档**：完整的安装、配置和开发指南
- **配置说明**：详细的配置参数说明
- **示例配置**：丰富的配置文件示例

---

## 📚 相关文档

- [返回主页](../README.md)
- [安装指南](./INSTALLATION_GUIDE.md)
- [配置参数详解](./CONFIGURATION.md)
- [支持的模型](./SUPPORTED_MODELS.md)
- [开发指南](./DEVELOPMENT.md)
